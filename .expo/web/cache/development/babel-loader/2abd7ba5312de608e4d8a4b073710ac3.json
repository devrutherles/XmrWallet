{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useCallback, useContext, useMemo, useEffect } from 'react';\nimport TabBarContext from \"./TabBarContext\";\nimport Reanimated, { runOnJS, useAnimatedReaction, useAnimatedRef, useAnimatedScrollHandler, useSharedValue } from 'react-native-reanimated';\nimport { Constants } from \"../../helpers\";\nvar FIX_RTL = Constants.isRTL && Constants.isAndroid;\n\nfunction PageCarousel(_ref) {\n  var props = _extends({}, _ref);\n\n  var carousel = useAnimatedRef();\n\n  var _useContext = useContext(TabBarContext),\n      itemsCount = _useContext.itemsCount,\n      currentPage = _useContext.currentPage,\n      targetPage = _useContext.targetPage,\n      pageWidth = _useContext.pageWidth,\n      setCurrentIndex = _useContext.setCurrentIndex;\n\n  var initialOffset = useMemo(function () {\n    return {\n      x: currentPage.value * pageWidth,\n      y: 0\n    };\n  }, []);\n  var indexChangeReason = useSharedValue(undefined);\n  var scrollToInitial = useCallback(function () {\n    if (Constants.isAndroid && currentPage.value) {\n      scrollToItem(currentPage.value);\n    }\n  }, []);\n  var calcOffset = useCallback(function () {\n    var _f = function _f(offset) {\n      return FIX_RTL ? pageWidth * (itemsCount - 1) - offset : offset;\n    };\n\n    _f._closure = {\n      FIX_RTL: FIX_RTL,\n      pageWidth: pageWidth,\n      itemsCount: itemsCount\n    };\n    _f.asString = \"function _f(offset){const{FIX_RTL,pageWidth,itemsCount}=jsThis._closure;{return FIX_RTL?pageWidth*(itemsCount-1)-offset:offset;}}\";\n    _f.__workletHash = 10908163045796;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\PageCarousel.js (33:33)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [pageWidth, itemsCount]);\n  var scrollHandler = useAnimatedScrollHandler({\n    onScroll: function () {\n      const _f = function (e) {\n        var xOffset = calcOffset(e.contentOffset.x);\n        var newIndex = xOffset / pageWidth;\n\n        if (indexChangeReason.value === 'byPress') {\n          indexChangeReason.value = undefined;\n        } else {\n          targetPage.value = newIndex;\n        }\n      };\n\n      _f._closure = {\n        calcOffset,\n        pageWidth,\n        indexChangeReason,\n        targetPage\n      };\n      _f.asString = \"function onScroll(e){const{calcOffset,pageWidth,indexChangeReason,targetPage}=jsThis._closure;{var xOffset=calcOffset(e.contentOffset.x);var newIndex=xOffset/pageWidth;if(indexChangeReason.value==='byPress'){indexChangeReason.value=undefined;}else{targetPage.value=newIndex;}}}\";\n      _f.__workletHash = 15514508375423;\n      _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\PageCarousel.js (39:14)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }(),\n    onMomentumEnd: function () {\n      const _f = function (e) {\n        var xOffset = calcOffset(e.contentOffset.x);\n        var newPage = Math.round(xOffset / pageWidth);\n        indexChangeReason.value = 'byScroll';\n        setCurrentIndex(newPage);\n      };\n\n      _f._closure = {\n        calcOffset,\n        pageWidth,\n        indexChangeReason,\n        setCurrentIndex\n      };\n      _f.asString = \"function onMomentumEnd(e){const{calcOffset,pageWidth,indexChangeReason,setCurrentIndex}=jsThis._closure;{var xOffset=calcOffset(e.contentOffset.x);var newPage=Math.round(xOffset/pageWidth);indexChangeReason.value='byScroll';setCurrentIndex(newPage);}}\";\n      _f.__workletHash = 4955492053364;\n      _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\PageCarousel.js (54:19)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }()\n  });\n  var scrollToItem = useCallback(function (index) {\n    var _carousel$current;\n\n    if (indexChangeReason.value === 'byScroll') {\n      indexChangeReason.value = undefined;\n    } else {\n      indexChangeReason.value = 'byPress';\n    }\n\n    var actualIndex = FIX_RTL ? itemsCount - index - 1 : index;\n    (_carousel$current = carousel.current) == null ? void 0 : _carousel$current.scrollTo({\n      x: actualIndex * pageWidth,\n      animated: false\n    });\n  }, [pageWidth, itemsCount]);\n  useAnimatedReaction(function () {\n    const _f = function () {\n      return currentPage.value;\n    };\n\n    _f._closure = {\n      currentPage\n    };\n    _f.asString = \"function _f(){const{currentPage}=jsThis._closure;{return currentPage.value;}}\";\n    _f.__workletHash = 16845019634419;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\PageCarousel.js (75:22)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), function () {\n    const _f = function (currIndex, prevIndex) {\n      if (prevIndex !== null && currIndex !== prevIndex) {\n        runOnJS(scrollToItem)(currIndex);\n      }\n    };\n\n    _f._closure = {\n      runOnJS,\n      scrollToItem\n    };\n    _f.asString = \"function _f(currIndex,prevIndex){const{runOnJS,scrollToItem}=jsThis._closure;{if(prevIndex!==null&&currIndex!==prevIndex){runOnJS(scrollToItem)(currIndex);}}}\";\n    _f.__workletHash = 6988859797192;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\PageCarousel.js (77:5)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }());\n  useEffect(function () {\n    var _carousel$current2;\n\n    (_carousel$current2 = carousel.current) == null ? void 0 : _carousel$current2.scrollTo({\n      x: currentPage.value * pageWidth,\n      animated: false\n    });\n  }, [pageWidth]);\n  return React.createElement(Reanimated.ScrollView, _extends({}, props, {\n    ref: carousel,\n    horizontal: true,\n    pagingEnabled: true,\n    showsHorizontalScrollIndicator: false,\n    onScroll: scrollHandler,\n    scrollEventThrottle: 16,\n    contentOffset: initialOffset,\n    onLayout: scrollToInitial\n  }));\n}\n\nexport default PageCarousel;","map":{"version":3,"sources":["C:/Users/ruthe/OneDrive/Ãrea de Trabalho/projetos/xmrwallet/node_modules/react-native-ui-lib/src/components/tabController/PageCarousel.js"],"names":["React","useCallback","useContext","useMemo","useEffect","TabBarContext","Reanimated","runOnJS","useAnimatedReaction","useAnimatedRef","useAnimatedScrollHandler","useSharedValue","Constants","FIX_RTL","isRTL","isAndroid","PageCarousel","props","carousel","itemsCount","currentPage","targetPage","pageWidth","setCurrentIndex","initialOffset","x","value","y","indexChangeReason","undefined","scrollToInitial","scrollToItem","calcOffset","offset","scrollHandler","onScroll","e","xOffset","contentOffset","newIndex","onMomentumEnd","newPage","Math","round","index","actualIndex","current","scrollTo","animated","currIndex","prevIndex"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useMemo, useEffect } from 'react';\nimport TabBarContext from \"./TabBarContext\";\nimport Reanimated, { runOnJS, useAnimatedReaction, useAnimatedRef, useAnimatedScrollHandler, useSharedValue } from 'react-native-reanimated';\nimport { Constants } from \"../../helpers\";\nconst FIX_RTL = Constants.isRTL && Constants.isAndroid;\n/**\n * @description: TabController's Page Carousel\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n * @notes: You must pass `asCarousel` flag to TabController and render your TabPages inside a PageCarousel\n */\n\nfunction PageCarousel({ ...props\n}) {\n  const carousel = useAnimatedRef();\n  const {\n    itemsCount,\n    currentPage,\n    targetPage,\n    pageWidth,\n    // carouselOffset,\n    setCurrentIndex\n  } = useContext(TabBarContext);\n  const initialOffset = useMemo(() => ({\n    x: currentPage.value * pageWidth,\n    y: 0\n  }), []);\n  const indexChangeReason = useSharedValue(undefined);\n  const scrollToInitial = useCallback(() => {\n    if (Constants.isAndroid && currentPage.value) {\n      scrollToItem(currentPage.value);\n    }\n  }, []);\n  const calcOffset = useCallback(offset => {\n    'worklet';\n\n    return FIX_RTL ? pageWidth * (itemsCount - 1) - offset : offset;\n  }, [pageWidth, itemsCount]);\n  const scrollHandler = useAnimatedScrollHandler({\n    onScroll: e => {\n      // carouselOffset.value = e.contentOffset.x;\n      const xOffset = calcOffset(e.contentOffset.x);\n      const newIndex = xOffset / pageWidth;\n\n      if (indexChangeReason.value === 'byPress') {\n        // Scroll was immediate and not by gesture\n\n        /* Round is for android when offset value has fraction */\n        // targetPage.value = withTiming(Math.round(newIndex));\n        indexChangeReason.value = undefined;\n      } else {\n        targetPage.value = newIndex;\n      }\n    },\n    onMomentumEnd: e => {\n      const xOffset = calcOffset(e.contentOffset.x);\n      const newPage = Math.round(xOffset / pageWidth);\n      indexChangeReason.value = 'byScroll';\n      setCurrentIndex(newPage);\n    }\n  });\n  const scrollToItem = useCallback(index => {\n    if (indexChangeReason.value === 'byScroll') {\n      indexChangeReason.value = undefined;\n    } else {\n      indexChangeReason.value = 'byPress';\n    }\n\n    const actualIndex = FIX_RTL ? itemsCount - index - 1 : index; // @ts-expect-error\n\n    carousel.current?.scrollTo({\n      x: actualIndex * pageWidth,\n      animated: false\n    });\n  }, [pageWidth, itemsCount]);\n  useAnimatedReaction(() => {\n    return currentPage.value;\n  }, (currIndex, prevIndex) => {\n    if (prevIndex !== null && currIndex !== prevIndex) {\n      runOnJS(scrollToItem)(currIndex);\n    }\n  });\n  useEffect(() => {\n    // @ts-expect-error\n    carousel.current?.scrollTo({\n      x: currentPage.value * pageWidth,\n      animated: false\n    });\n  }, [pageWidth]);\n  return <Reanimated.ScrollView {...props} ref={carousel} horizontal pagingEnabled showsHorizontalScrollIndicator={false} onScroll={scrollHandler} scrollEventThrottle={16} contentOffset={initialOffset} // iOS only\n  onLayout={scrollToInitial} // Android only\n  />;\n}\n\nexport default PageCarousel;"]},"metadata":{},"sourceType":"module"}