{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"validate\", \"validationMessage\", \"validateOnBlur\", \"validateOnChange\", \"validateOnStart\", \"onChangeValidity\"];\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport _ from 'lodash';\nimport * as Presenter from \"./Presenter\";\nimport { useDidUpdate } from \"../../hooks\";\nexport default function useFieldState(_ref) {\n  var validate = _ref.validate,\n      validationMessage = _ref.validationMessage,\n      validateOnBlur = _ref.validateOnBlur,\n      validateOnChange = _ref.validateOnChange,\n      validateOnStart = _ref.validateOnStart,\n      onChangeValidity = _ref.onChangeValidity,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useState = useState(props.value),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isFocused = _useState4[0],\n      setIsFocused = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isValid = _useState6[0],\n      setIsValid = _useState6[1];\n\n  var _useState7 = useState(undefined),\n      _useState8 = _slicedToArray(_useState7, 2),\n      failingValidatorIndex = _useState8[0],\n      setFailingValidatorIndex = _useState8[1];\n\n  useEffect(function () {\n    if (validateOnStart) {\n      validateField();\n    }\n  }, []);\n  useEffect(function () {\n    if (props.value !== value) {\n      setValue(props.value);\n\n      if (validateOnChange) {\n        validateField(props.value);\n      }\n    }\n  }, [props.value, validateOnChange]);\n  useDidUpdate(function () {\n    onChangeValidity == null ? void 0 : onChangeValidity(isValid);\n  }, [isValid]);\n  var validateField = useCallback(function () {\n    var valueToValidate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : value;\n\n    var _Presenter$validate = Presenter.validate(valueToValidate, validate),\n        _Presenter$validate2 = _slicedToArray(_Presenter$validate, 2),\n        _isValid = _Presenter$validate2[0],\n        _failingValidatorIndex = _Presenter$validate2[1];\n\n    setIsValid(_isValid);\n    setFailingValidatorIndex(_failingValidatorIndex);\n  }, [value, validate]);\n  var onFocus = useCallback(function () {\n    setIsFocused(true);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    props.onFocus == null ? void 0 : props.onFocus.apply(props, args);\n  }, [props.onFocus]);\n  var onBlur = useCallback(function () {\n    setIsFocused(false);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    props.onBlur == null ? void 0 : props.onBlur.apply(props, args);\n\n    if (validateOnBlur) {\n      validateField();\n    }\n  }, [props.onBlur, validateOnBlur, validateField]);\n  var onChangeText = useCallback(function (text) {\n    setValue(text);\n    props.onChangeText == null ? void 0 : props.onChangeText(text);\n\n    if (validateOnChange) {\n      validateField(text);\n    }\n  }, [props.onChangeText, validateOnChange, validateField]);\n  var fieldState = useMemo(function () {\n    return {\n      value: value,\n      hasValue: !_.isEmpty(value),\n      isValid: validationMessage && !validate ? false : isValid,\n      isFocused: isFocused,\n      failingValidatorIndex: failingValidatorIndex\n    };\n  }, [value, isFocused, isValid, failingValidatorIndex, validationMessage, validate]);\n  return {\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onChangeText: onChangeText,\n    fieldState: fieldState,\n    validateField: validateField\n  };\n}","map":{"version":3,"sources":["C:/Users/ruthe/OneDrive/Área de Trabalho/projetos/xmrwallet/node_modules/react-native-ui-lib/src/incubator/TextField/useFieldState.js"],"names":["React","useCallback","useState","useEffect","useMemo","_","Presenter","useDidUpdate","useFieldState","validate","validationMessage","validateOnBlur","validateOnChange","validateOnStart","onChangeValidity","props","value","setValue","isFocused","setIsFocused","isValid","setIsValid","undefined","failingValidatorIndex","setFailingValidatorIndex","validateField","valueToValidate","_isValid","_failingValidatorIndex","onFocus","args","onBlur","onChangeText","text","fieldState","hasValue","isEmpty"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport _ from 'lodash';\nimport * as Presenter from \"./Presenter\";\nimport { useDidUpdate } from \"../../hooks\";\nexport default function useFieldState({\n  validate,\n  validationMessage,\n  validateOnBlur,\n  validateOnChange,\n  validateOnStart,\n  onChangeValidity,\n  ...props\n}) {\n  const [value, setValue] = useState(props.value);\n  const [isFocused, setIsFocused] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n  const [failingValidatorIndex, setFailingValidatorIndex] = useState(undefined);\n  useEffect(() => {\n    if (validateOnStart) {\n      validateField();\n    }\n  }, []);\n  useEffect(() => {\n    if (props.value !== value) {\n      setValue(props.value);\n\n      if (validateOnChange) {\n        validateField(props.value);\n      }\n    }\n    /* On purpose listen only to props.value change */\n\n    /* eslint-disable-next-line react-hooks/exhaustive-deps*/\n\n  }, [props.value, validateOnChange]);\n  useDidUpdate(() => {\n    onChangeValidity?.(isValid);\n  }, [isValid]);\n  const validateField = useCallback((valueToValidate = value) => {\n    const [_isValid, _failingValidatorIndex] = Presenter.validate(valueToValidate, validate);\n    setIsValid(_isValid);\n    setFailingValidatorIndex(_failingValidatorIndex);\n  }, [value, validate]);\n  const onFocus = useCallback((...args) => {\n    setIsFocused(true); //@ts-expect-error\n\n    props.onFocus?.(...args);\n  }, [props.onFocus]);\n  const onBlur = useCallback((...args) => {\n    setIsFocused(false); //@ts-expect-error\n\n    props.onBlur?.(...args);\n\n    if (validateOnBlur) {\n      validateField();\n    }\n  }, [props.onBlur, validateOnBlur, validateField]);\n  const onChangeText = useCallback(text => {\n    setValue(text);\n    props.onChangeText?.(text);\n\n    if (validateOnChange) {\n      validateField(text);\n    }\n  }, [props.onChangeText, validateOnChange, validateField]);\n  const fieldState = useMemo(() => {\n    return {\n      value,\n      hasValue: !_.isEmpty(value),\n      isValid: validationMessage && !validate ? false : isValid,\n      isFocused,\n      failingValidatorIndex\n    };\n  }, [value, isFocused, isValid, failingValidatorIndex, validationMessage, validate]);\n  return {\n    onFocus,\n    onBlur,\n    onChangeText,\n    fieldState,\n    validateField\n  };\n}"]},"metadata":{},"sourceType":"module"}