{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"directions\", \"dismissible\", \"animateToOrigin\", \"onDismiss\", \"directionLock\", \"threshold\", \"containerStyle\", \"children\"];\nimport _pt from \"prop-types\";\nimport { isEmpty } from 'lodash';\nimport React, { useCallback } from 'react';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, { useSharedValue, useAnimatedStyle, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport { PanViewDirections, PanViewDismissThreshold, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nimport useHiddenLocation from \"../hooks/useHiddenLocation\";\nexport { PanViewDirections, PanViewDismissThreshold };\nvar SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: 300,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\n\nvar PanView = function PanView(props) {\n  var _props$directions = props.directions,\n      directions = _props$directions === void 0 ? [PanViewDirections.UP, PanViewDirections.DOWN, PanViewDirections.LEFT, PanViewDirections.RIGHT] : _props$directions,\n      dismissible = props.dismissible,\n      animateToOrigin = props.animateToOrigin,\n      onDismiss = props.onDismiss,\n      directionLock = props.directionLock,\n      threshold = props.threshold,\n      containerStyle = props.containerStyle,\n      children = props.children,\n      others = _objectWithoutProperties(props, _excluded);\n\n  var waitingForDismiss = useSharedValue(false);\n  var translationX = useSharedValue(0);\n  var translationY = useSharedValue(0);\n  var animatedStyle = useAnimatedStyle(function () {\n    const _f = function () {\n      return {\n        transform: [{\n          translateX: translationX.value\n        }, {\n          translateY: translationY.value\n        }]\n      };\n    };\n\n    _f._closure = {\n      translationX,\n      translationY\n    };\n    _f.asString = \"function _f(){const{translationX,translationY}=jsThis._closure;{return{transform:[{translateX:translationX.value},{translateY:translationY.value}]};}}\";\n    _f.__workletHash = 16366799328993;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (33:41)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), []);\n  var containerRef = React.createRef();\n\n  var _useHiddenLocation = useHiddenLocation({\n    containerRef: containerRef\n  }),\n      onLayout = _useHiddenLocation.onLayout,\n      hiddenLocation = _useHiddenLocation.hiddenLocation;\n\n  var getTranslationOptions = function () {\n    var _f = function _f() {\n      return {\n        directionLock: directionLock,\n        currentTranslation: {\n          x: translationX.value,\n          y: translationY.value\n        }\n      };\n    };\n\n    _f._closure = {\n      directionLock: directionLock,\n      translationX: translationX,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(){const{directionLock,translationX,translationY}=jsThis._closure;{return{directionLock:directionLock,currentTranslation:{x:translationX.value,y:translationY.value}};}}\";\n    _f.__workletHash = 4921563924443;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (50:32)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }();\n\n  var setTranslation = function () {\n    var _f = function _f(event, initialTranslation) {\n      var result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n      translationX.value = result.x;\n      translationY.value = result.y;\n    };\n\n    _f._closure = {\n      getTranslation: getTranslation,\n      directions: directions,\n      getTranslationOptions: getTranslationOptions,\n      translationX: translationX,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(event,initialTranslation){const{getTranslation,directions,getTranslationOptions,translationX,translationY}=jsThis._closure;{var result=getTranslation(event,initialTranslation,directions,getTranslationOptions());translationX.value=result.x;translationY.value=result.y;}}\";\n    _f.__workletHash = 15633359906092;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (62:25)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }();\n\n  var dismiss = useCallback(function () {\n    var _f = function _f(isFinished) {\n      if (isFinished && waitingForDismiss.value && onDismiss) {\n        waitingForDismiss.value = false;\n        runOnJS(onDismiss)();\n      }\n    };\n\n    _f._closure = {\n      waitingForDismiss: waitingForDismiss,\n      onDismiss: onDismiss,\n      runOnJS: runOnJS\n    };\n    _f.asString = \"function _f(isFinished){const{waitingForDismiss,onDismiss,runOnJS}=jsThis._closure;{if(isFinished&&waitingForDismiss.value&&onDismiss){waitingForDismiss.value=false;runOnJS(onDismiss)();}}}\";\n    _f.__workletHash = 11391575833406;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (70:30)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [onDismiss]);\n  var returnToOrigin = useCallback(function () {\n    var _f = function _f() {\n      if (animateToOrigin) {\n        translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n        translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      }\n    };\n\n    _f._closure = {\n      animateToOrigin: animateToOrigin,\n      translationX: translationX,\n      withSpring: withSpring,\n      SPRING_BACK_ANIMATION_CONFIG: SPRING_BACK_ANIMATION_CONFIG,\n      translationY: translationY\n    };\n    _f.asString = \"function _f(){const{animateToOrigin,translationX,withSpring,SPRING_BACK_ANIMATION_CONFIG,translationY}=jsThis._closure;{if(animateToOrigin){translationX.value=withSpring(0,SPRING_BACK_ANIMATION_CONFIG);translationY.value=withSpring(0,SPRING_BACK_ANIMATION_CONFIG);}}}\";\n    _f.__workletHash = 6077814463525;\n    _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (79:37)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [animateToOrigin]);\n  var onGestureEvent = useAnimatedGestureHandler({\n    onStart: function () {\n      const _f = function (_event, context) {\n        context.initialTranslation = {\n          x: translationX.value,\n          y: translationY.value\n        };\n      };\n\n      _f._closure = {\n        translationX,\n        translationY\n      };\n      _f.asString = \"function onStart(_event,context){const{translationX,translationY}=jsThis._closure;{context.initialTranslation={x:translationX.value,y:translationY.value};}}\";\n      _f.__workletHash = 9635990769242;\n      _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (89:13)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }(),\n    onActive: function () {\n      const _f = function (event, context) {\n        setTranslation(event, context.initialTranslation);\n      };\n\n      _f._closure = {\n        setTranslation\n      };\n      _f.asString = \"function onActive(event,context){const{setTranslation}=jsThis._closure;{setTranslation(event,context.initialTranslation);}}\";\n      _f.__workletHash = 339493327922;\n      _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (95:14)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }(),\n    onEnd: function () {\n      const _f = function (event) {\n        if (dismissible) {\n          var velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n\n          if (velocity) {\n            waitingForDismiss.value = true;\n\n            if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n              var toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n              var duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n              translationX.value = withTiming(toX, {\n                duration: duration\n              }, dismiss);\n            }\n\n            if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n              var toY = velocity.y > 0 ? hiddenLocation.bottom : hiddenLocation.top;\n\n              var _duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n\n              translationY.value = withTiming(toY, {\n                duration: _duration\n              }, dismiss);\n            }\n          } else {\n            returnToOrigin();\n          }\n        } else {\n          returnToOrigin();\n        }\n      };\n\n      _f._closure = {\n        dismissible,\n        getDismissVelocity,\n        directions,\n        getTranslationOptions,\n        threshold,\n        waitingForDismiss,\n        translationX,\n        hiddenLocation: {\n          right: hiddenLocation.right,\n          left: hiddenLocation.left,\n          bottom: hiddenLocation.bottom,\n          top: hiddenLocation.top\n        },\n        withTiming,\n        dismiss,\n        translationY,\n        returnToOrigin\n      };\n      _f.asString = \"function onEnd(event){const{dismissible,getDismissVelocity,directions,getTranslationOptions,threshold,waitingForDismiss,translationX,hiddenLocation,withTiming,dismiss,translationY,returnToOrigin}=jsThis._closure;{if(dismissible){var velocity=getDismissVelocity(event,directions,getTranslationOptions(),threshold);if(velocity){waitingForDismiss.value=true;if(translationX.value!==0&&velocity.x!==undefined&&velocity.x!==0){var toX=velocity.x>0?hiddenLocation.right:hiddenLocation.left;var duration=Math.abs((toX-translationX.value)/velocity.x)*1000;translationX.value=withTiming(toX,{duration:duration},dismiss);}if(translationY.value!==0&&velocity.y!==undefined&&velocity.y!==0){var toY=velocity.y>0?hiddenLocation.bottom:hiddenLocation.top;var _duration=Math.abs((toY-translationY.value)/velocity.y)*1000;translationY.value=withTiming(toY,{duration:_duration},dismiss);}}else{returnToOrigin();}}else{returnToOrigin();}}}\";\n      _f.__workletHash = 8415053684994;\n      _f.__location = \"C:\\\\Users\\\\ruthe\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\projetos\\\\xmrwallet\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\incubator\\\\panView\\\\index.js (98:11)\";\n\n      global.__reanimatedWorkletInit(_f);\n\n      return _f;\n    }()\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return React.createElement(View, {\n    ref: containerRef,\n    style: containerStyle,\n    onLayout: onLayout\n  }, React.createElement(PanGestureHandler, {\n    onGestureEvent: isEmpty(directions) ? undefined : onGestureEvent\n  }, React.createElement(Animated.View, {\n    style: animatedStyle\n  }, React.createElement(View, others, children))));\n};\n\nPanView.propTypes = {\n  directions: _pt.array,\n  dismissible: _pt.bool,\n  animateToOrigin: _pt.bool,\n  onDismiss: _pt.func,\n  directionLock: _pt.bool,\n  children: _pt.oneOfType([_pt.node, _pt.arrayOf(_pt.node)])\n};\nPanView.displayName = 'PanView';\nPanView.directions = PanViewDirections;\nPanView.defaultProps = {\n  threshold: DEFAULT_THRESHOLD\n};\nexport default asBaseComponent(PanView);","map":{"version":3,"sources":["C:/Users/ruthe/OneDrive/Ãrea de Trabalho/projetos/xmrwallet/node_modules/react-native-ui-lib/src/incubator/panView/index.js"],"names":["_pt","isEmpty","React","useCallback","PanGestureHandler","Animated","useSharedValue","useAnimatedStyle","withSpring","withTiming","useAnimatedGestureHandler","runOnJS","asBaseComponent","View","PanViewDirections","PanViewDismissThreshold","getTranslation","getDismissVelocity","DEFAULT_THRESHOLD","useHiddenLocation","SPRING_BACK_ANIMATION_CONFIG","velocity","damping","stiffness","mass","PanView","props","directions","UP","DOWN","LEFT","RIGHT","dismissible","animateToOrigin","onDismiss","directionLock","threshold","containerStyle","children","others","waitingForDismiss","translationX","translationY","animatedStyle","transform","translateX","value","translateY","containerRef","createRef","onLayout","hiddenLocation","getTranslationOptions","currentTranslation","x","y","setTranslation","event","initialTranslation","result","dismiss","isFinished","returnToOrigin","onGestureEvent","onStart","_event","context","onActive","onEnd","undefined","toX","right","left","duration","Math","abs","toY","bottom","top","propTypes","array","bool","func","oneOfType","node","arrayOf","displayName","defaultProps"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\nimport { isEmpty } from 'lodash';\nimport React, { useCallback } from 'react';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, { useSharedValue, useAnimatedStyle, withSpring, withTiming, useAnimatedGestureHandler, runOnJS } from 'react-native-reanimated';\nimport { asBaseComponent } from \"../../commons/new\";\nimport View from \"../../components/view\";\nimport { PanViewDirections, PanViewDismissThreshold, getTranslation, getDismissVelocity, DEFAULT_THRESHOLD } from \"./panningUtil\";\nimport useHiddenLocation from \"../hooks/useHiddenLocation\";\nexport { PanViewDirections, PanViewDismissThreshold };\nconst SPRING_BACK_ANIMATION_CONFIG = {\n  velocity: 300,\n  damping: 20,\n  stiffness: 300,\n  mass: 0.8\n};\n\nconst PanView = props => {\n  const {\n    directions = [PanViewDirections.UP, PanViewDirections.DOWN, PanViewDirections.LEFT, PanViewDirections.RIGHT],\n    dismissible,\n    animateToOrigin,\n    onDismiss,\n    directionLock,\n    threshold,\n    containerStyle,\n    children,\n    ...others\n  } = props;\n  const waitingForDismiss = useSharedValue(false);\n  const translationX = useSharedValue(0);\n  const translationY = useSharedValue(0);\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{\n        translateX: translationX.value\n      }, {\n        translateY: translationY.value\n      }]\n    };\n  }, []);\n  const containerRef = React.createRef();\n  const {\n    onLayout,\n    hiddenLocation\n  } = useHiddenLocation({\n    containerRef\n  });\n\n  const getTranslationOptions = () => {\n    'worklet';\n\n    return {\n      directionLock,\n      currentTranslation: {\n        x: translationX.value,\n        y: translationY.value\n      }\n    };\n  };\n\n  const setTranslation = (event, initialTranslation) => {\n    'worklet';\n\n    const result = getTranslation(event, initialTranslation, directions, getTranslationOptions());\n    translationX.value = result.x;\n    translationY.value = result.y;\n  };\n\n  const dismiss = useCallback(isFinished => {\n    'worklet';\n\n    if (isFinished && waitingForDismiss.value && onDismiss) {\n      waitingForDismiss.value = false;\n      runOnJS(onDismiss)();\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [onDismiss]);\n  const returnToOrigin = useCallback(() => {\n    'worklet';\n\n    if (animateToOrigin) {\n      translationX.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n      translationY.value = withSpring(0, SPRING_BACK_ANIMATION_CONFIG);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [animateToOrigin]);\n  const onGestureEvent = useAnimatedGestureHandler({\n    onStart: (_event, context) => {\n      context.initialTranslation = {\n        x: translationX.value,\n        y: translationY.value\n      };\n    },\n    onActive: (event, context) => {\n      setTranslation(event, context.initialTranslation);\n    },\n    onEnd: event => {\n      if (dismissible) {\n        const velocity = getDismissVelocity(event, directions, getTranslationOptions(), threshold);\n\n        if (velocity) {\n          waitingForDismiss.value = true;\n\n          if (translationX.value !== 0 && velocity.x !== undefined && velocity.x !== 0) {\n            const toX = velocity.x > 0 ? hiddenLocation.right : hiddenLocation.left;\n            const duration = Math.abs((toX - translationX.value) / velocity.x) * 1000;\n            translationX.value = withTiming(toX, {\n              duration\n            }, dismiss);\n          }\n\n          if (translationY.value !== 0 && velocity.y !== undefined && velocity.y !== 0) {\n            const toY = velocity.y > 0 ? hiddenLocation.bottom : hiddenLocation.top;\n            const duration = Math.abs((toY - translationY.value) / velocity.y) * 1000;\n            translationY.value = withTiming(toY, {\n              duration\n            }, dismiss);\n          }\n        } else {\n          returnToOrigin();\n        }\n      } else {\n        returnToOrigin();\n      }\n    }\n  }, [directions, dismissible, setTranslation, returnToOrigin]);\n  return (// TODO: delete comments once completed\n    <View ref={containerRef} style={containerStyle} onLayout={onLayout}>\n      <PanGestureHandler onGestureEvent={isEmpty(directions) ? undefined : onGestureEvent}>\n        <Animated.View // !visible.current && styles.hidden is done to fix a bug is iOS\n        //   style={[style, animatedStyle, !visible.current && styles.hidden]}\n        style={animatedStyle} //   style={[style]}\n        >\n          <View {...others}>{children}</View>\n        </Animated.View>\n      </PanGestureHandler>\n    </View>\n  );\n};\n\nPanView.propTypes = {\n  /**\n     * The directions of the allowed pan (default is all)\n     * Types: UP, DOWN, LEFT and RIGHT (using PanView.directions.###)\n     */\n  directions: _pt.array,\n\n  /**\n     * Dismiss the view if over the threshold (translation or velocity).\n     */\n  dismissible: _pt.bool,\n\n  /**\n     * Animate to start if not dismissed.\n     */\n  animateToOrigin: _pt.bool,\n\n  /**\n     * Callback to the dismiss animation end\n     */\n  onDismiss: _pt.func,\n\n  /**\n     * Should the direction of dragging be locked once a drag has started.\n     */\n  directionLock: _pt.bool,\n  children: _pt.oneOfType([_pt.node, _pt.arrayOf(_pt.node)])\n};\nPanView.displayName = 'PanView';\nPanView.directions = PanViewDirections;\nPanView.defaultProps = {\n  threshold: DEFAULT_THRESHOLD\n};\nexport default asBaseComponent(PanView);"]},"metadata":{},"sourceType":"module"}